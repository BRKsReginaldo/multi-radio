{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Bem Vindo Essa \u00e9 a documenta\u00e7\u00e3o do projeto multi radio Foi construido utilizando a estrutura de micro-servi\u00e7os baseado em containers e multiplos bancos de dados. Iniciando Voc\u00ea pode saber mais acessando outras se\u00e7\u00f5es dessa documenta\u00e7\u00e3o","title":"Introdu\u00e7\u00e3o"},{"location":"#bem-vindo","text":"Essa \u00e9 a documenta\u00e7\u00e3o do projeto multi radio Foi construido utilizando a estrutura de micro-servi\u00e7os baseado em containers e multiplos bancos de dados.","title":"Bem Vindo"},{"location":"#iniciando","text":"Voc\u00ea pode saber mais acessando outras se\u00e7\u00f5es dessa documenta\u00e7\u00e3o","title":"Iniciando"},{"location":"development/","text":"Desenvolvimento Primeiro \u00e9 necess\u00e1rio clonar o reposit\u00f3rio do github $ git clone https://github.com/BRKsReginaldo/multi-radio Ambientes S\u00e3o necess\u00e1rios alguns arquivos de ambiente para a aplica\u00e7\u00e3o funcionar corretamente, em seguida vamos mostrar como configurar um ambiente completo para desenvolvimento Ambiente fiefs (feudos) O ambiente dos feudos (fiefs) fica na pasta landlord/fiefs, e seu arquivo de ambiente exemplo env.example pode ser encontrado na raiz da pasta fiefs Exemplo NODE_ENV=development PORT=3000 DB_HOST=fake_host DB_USER=fake_user DB_PASSWORD=fake_password DB_PORT=27017 DB_DB=fake_db TEST_DB_HOST=fake_host_test TEST_DB_USER=fake_user_test TEST_DB_PASSWORD=fake_password_test TEST_DB_PORT=27017 TEST_DB_DB=fake_db_test","title":"Desenvolvimento"},{"location":"development/#desenvolvimento","text":"Primeiro \u00e9 necess\u00e1rio clonar o reposit\u00f3rio do github $ git clone https://github.com/BRKsReginaldo/multi-radio","title":"Desenvolvimento"},{"location":"development/#ambientes","text":"S\u00e3o necess\u00e1rios alguns arquivos de ambiente para a aplica\u00e7\u00e3o funcionar corretamente, em seguida vamos mostrar como configurar um ambiente completo para desenvolvimento","title":"Ambientes"},{"location":"development/#ambiente-fiefs-feudos","text":"O ambiente dos feudos (fiefs) fica na pasta landlord/fiefs, e seu arquivo de ambiente exemplo env.example pode ser encontrado na raiz da pasta fiefs","title":"Ambiente fiefs (feudos)"},{"location":"development/#exemplo","text":"NODE_ENV=development PORT=3000 DB_HOST=fake_host DB_USER=fake_user DB_PASSWORD=fake_password DB_PORT=27017 DB_DB=fake_db TEST_DB_HOST=fake_host_test TEST_DB_USER=fake_user_test TEST_DB_PASSWORD=fake_password_test TEST_DB_PORT=27017 TEST_DB_DB=fake_db_test","title":"Exemplo"},{"location":"how-it-works/","text":"Como Funciona Aqui \u00e9 uma se\u00e7\u00e3o onde eu tento explicar mais ou menos como funciona cada parte do sistema","title":"Como Funciona"},{"location":"how-it-works/#como-funciona","text":"Aqui \u00e9 uma se\u00e7\u00e3o onde eu tento explicar mais ou menos como funciona cada parte do sistema","title":"Como Funciona"},{"location":"troubleshooting/","text":"Solu\u00e7\u00e3o de Problemas se\u00e7\u00e3o para resolver problemas conhecidos","title":"Solu\u00e7\u00e3o de Problemas"},{"location":"troubleshooting/#solucao-de-problemas","text":"se\u00e7\u00e3o para resolver problemas conhecidos","title":"Solu\u00e7\u00e3o de Problemas"},{"location":"deployment/installation-guide/","text":"Guia de instala\u00e7\u00e3o guia de instala\u00e7\u00e3o do app para deploy","title":"Guia de Instala\u00e7\u00e3o"},{"location":"deployment/installation-guide/#guia-de-instalacao","text":"guia de instala\u00e7\u00e3o do app para deploy","title":"Guia de instala\u00e7\u00e3o"},{"location":"software-engineering/entities/","text":"Entidades Globais Fiefs (Feudos) O fief \u00e9 uma entidade abstrata responsavel por representar todas as radios do sistema, suas propriedades s\u00e3o: Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio uuid string primary, unique true null name string true null postgres_db_host string true null postgres_db_port string true null postgres_db_user string true null postgres_db_database string true null postgres_db_password string true null mongo_db_host string true null mongo_db_port string true null mongo_db_user string true null mongo_db_database string true null mongo_db_password string true null mongo_db_auth string true null database that contains auth information status integer true 1 1 == ativo, 0 == inativo Hostnames O hostname \u00e9 uma entidade que representa uma de muitas formas de se acessar um fief, o hostname possui algumas propriedades com: Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio uuid string primary, unique true null fqdn string unique true null fully qualified domain name redirect_to string false null redireciona pro link caso exista Roles Um role representa um cargo na aplica\u00e7\u00e3o, o role possui diversas permiss\u00f5es Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio code string primary, unique true null name string true null nome do cargo description string true null descri\u00e7\u00e3o do cargo e.g admin Permissions Uma permiss\u00e3o concede acesso a determinado recurso na aplica\u00e7\u00e3o Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio code string primary, unique true null name string true null nome da permiss\u00e3o description string true null descri\u00e7\u00e3o do cargo e.g Fiefs (Feudos) PermissionRole A rela\u00e7\u00e3o entre um cargo e uma permiss\u00e3o Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio permission_code string primary, unique, foreign permissions(id) true null role_code string primary, unique, foreign roles(id) true null read boolean true false permiss\u00e3o de leitura write boolean true false permiss\u00e3o de escrita User Um usu\u00e1rio do sistema possui permiss\u00f5es admnistrativas como gerenciamento de hostnames, Fiefs (Feudos), roles, permissions al\u00e9m de poder responder perguntas na area de suporte Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio uuid string primary, unique true null name string true null email string true null password string false null RoleUser A rela\u00e7\u00e3o entre um usuario e seus diversos cargos Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio user_uuid string primary, unique, foreign permissions(id) true null role_code string primary, unique, foreign roles(id) true null PermissionUser A rela\u00e7\u00e3o entre um usuario e suas respectivas permiss\u00f5es Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio user_uuid string primary, unique, foreign permissions(id) true null permision_code string primary, unique, foreign roles(id) true null read boolean true false permiss\u00e3o de leitura write boolean true false permiss\u00e3o de escrita PersonalAccessToken Um token pessoal permite que a api seja acessada programaticamente conforme as permiss\u00f5es da mesma Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio uuid string primary, unique true null name string true null description string true null token string unique true null PersonalAccessTokenRole A rela\u00e7\u00e3o entre um token de acesso pessoal e um cargo Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio personal_access_token_uuid string primary true null role_id string primary true null PersonalAccessTokenPermission A rela\u00e7\u00e3o entre um token de acesso pessoal e suas permiss\u00f5es Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio personal_access_token_uuid string primary true null permission_id string primary true null read boolean primary true null write boolean primary true null","title":"Entidades Globais"},{"location":"software-engineering/entities/#entidades-globais","text":"","title":"Entidades Globais"},{"location":"software-engineering/entities/#fiefs-feudos","text":"O fief \u00e9 uma entidade abstrata responsavel por representar todas as radios do sistema, suas propriedades s\u00e3o: Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio uuid string primary, unique true null name string true null postgres_db_host string true null postgres_db_port string true null postgres_db_user string true null postgres_db_database string true null postgres_db_password string true null mongo_db_host string true null mongo_db_port string true null mongo_db_user string true null mongo_db_database string true null mongo_db_password string true null mongo_db_auth string true null database that contains auth information status integer true 1 1 == ativo, 0 == inativo","title":"Fiefs (Feudos)"},{"location":"software-engineering/entities/#hostnames","text":"O hostname \u00e9 uma entidade que representa uma de muitas formas de se acessar um fief, o hostname possui algumas propriedades com: Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio uuid string primary, unique true null fqdn string unique true null fully qualified domain name redirect_to string false null redireciona pro link caso exista","title":"Hostnames"},{"location":"software-engineering/entities/#roles","text":"Um role representa um cargo na aplica\u00e7\u00e3o, o role possui diversas permiss\u00f5es Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio code string primary, unique true null name string true null nome do cargo description string true null descri\u00e7\u00e3o do cargo e.g admin","title":"Roles"},{"location":"software-engineering/entities/#permissions","text":"Uma permiss\u00e3o concede acesso a determinado recurso na aplica\u00e7\u00e3o Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio code string primary, unique true null name string true null nome da permiss\u00e3o description string true null descri\u00e7\u00e3o do cargo e.g Fiefs (Feudos)","title":"Permissions"},{"location":"software-engineering/entities/#permissionrole","text":"A rela\u00e7\u00e3o entre um cargo e uma permiss\u00e3o Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio permission_code string primary, unique, foreign permissions(id) true null role_code string primary, unique, foreign roles(id) true null read boolean true false permiss\u00e3o de leitura write boolean true false permiss\u00e3o de escrita","title":"PermissionRole"},{"location":"software-engineering/entities/#user","text":"Um usu\u00e1rio do sistema possui permiss\u00f5es admnistrativas como gerenciamento de hostnames, Fiefs (Feudos), roles, permissions al\u00e9m de poder responder perguntas na area de suporte Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio uuid string primary, unique true null name string true null email string true null password string false null","title":"User"},{"location":"software-engineering/entities/#roleuser","text":"A rela\u00e7\u00e3o entre um usuario e seus diversos cargos Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio user_uuid string primary, unique, foreign permissions(id) true null role_code string primary, unique, foreign roles(id) true null","title":"RoleUser"},{"location":"software-engineering/entities/#permissionuser","text":"A rela\u00e7\u00e3o entre um usuario e suas respectivas permiss\u00f5es Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio user_uuid string primary, unique, foreign permissions(id) true null permision_code string primary, unique, foreign roles(id) true null read boolean true false permiss\u00e3o de leitura write boolean true false permiss\u00e3o de escrita","title":"PermissionUser"},{"location":"software-engineering/entities/#personalaccesstoken","text":"Um token pessoal permite que a api seja acessada programaticamente conforme as permiss\u00f5es da mesma Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio uuid string primary, unique true null name string true null description string true null token string unique true null","title":"PersonalAccessToken"},{"location":"software-engineering/entities/#personalaccesstokenrole","text":"A rela\u00e7\u00e3o entre um token de acesso pessoal e um cargo Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio personal_access_token_uuid string primary true null role_id string primary true null","title":"PersonalAccessTokenRole"},{"location":"software-engineering/entities/#personalaccesstokenpermission","text":"A rela\u00e7\u00e3o entre um token de acesso pessoal e suas permiss\u00f5es Coluna Tipo Chave Obrigat\u00f3rio Padr\u00e3o Coment\u00e1rio personal_access_token_uuid string primary true null permission_id string primary true null read boolean primary true null write boolean primary true null","title":"PersonalAccessTokenPermission"},{"location":"software-engineering/goals/","text":"Objetivos Os objetivos desse projeto \u00e9 entrar um software multi-tenancy de gerenciamento de radios pessoais, cada radio possuir\u00e1 seu pr\u00f3prio dominio, seu controle de acesso e suas pr\u00f3prias estatisticas. O resultado final deve possuir diversos micro servi\u00e7os totalmente desacoplados e escalaveis separadamente, com a possibilidade de colocar todos os servi\u00e7os em um cluster e escalar verticalmente em qualquer propor\u00e7\u00e3o Estatisticas As estatisticas proporcionadas pelo sistema incluem mas n\u00e3o se limitam a quantidade de ouvintes em tempo real quantidade de acessos do sistema em determinados periodos (hora | dia | semana | m\u00eas) quantidade de acessos por plataforma (desktop | tablet | celular) quantidade de acessos por regi\u00e3o (mapa) quantidade de acessos por sistema operacional Integra\u00e7\u00e3o Social O sistema dever\u00e1 possuir integra\u00e7\u00e3o com redes sociais, permitindo que os ouvintes possam curtir | compartilhar as musicas Integra\u00e7\u00e3o com os ouvintes O sistema dever\u00e1 possuir uma \u00e1rea para sugest\u00f5es e cr\u00edticas dos ouvintes, todos os textos podem ser personalizados Banners O sistema dever\u00e1 possuir uma area para banners (apenas de imagem) Sorteio O sistema dever\u00e1 possuir uma area para criar sorteios entre os ouvintes podendo definir regras de sorteio como data de inicio / fim, condi\u00e7\u00f5es como curtiu um determinado numero de musicas ou compartilhou dentro do periodo do sorteio Monitoramente O projeto deve possuir um sistema de monitoramente que detecta problemas no streaming da radio Hist\u00f3rico Musical O sistema deve possuir um servi\u00e7o que armazena todas as musicas tocadas no player para exibi\u00e7\u00e3o futura Suporte O sistema deve possuir uma area de suporte para as radios que possuirem duvidas Suporte ao usu\u00e1rio O sistema deve possuir uma area de suporte para os ouvintes caso estes venham a ter problemas com o streaming ou outra parte do sistema Noticias O sistema deve possuir um sistema de noticias para as radios, visto que a maioria das r\u00e1dios tamb\u00e9m postam noticias","title":"Objetivos"},{"location":"software-engineering/goals/#objetivos","text":"Os objetivos desse projeto \u00e9 entrar um software multi-tenancy de gerenciamento de radios pessoais, cada radio possuir\u00e1 seu pr\u00f3prio dominio, seu controle de acesso e suas pr\u00f3prias estatisticas. O resultado final deve possuir diversos micro servi\u00e7os totalmente desacoplados e escalaveis separadamente, com a possibilidade de colocar todos os servi\u00e7os em um cluster e escalar verticalmente em qualquer propor\u00e7\u00e3o","title":"Objetivos"},{"location":"software-engineering/goals/#estatisticas","text":"As estatisticas proporcionadas pelo sistema incluem mas n\u00e3o se limitam a quantidade de ouvintes em tempo real quantidade de acessos do sistema em determinados periodos (hora | dia | semana | m\u00eas) quantidade de acessos por plataforma (desktop | tablet | celular) quantidade de acessos por regi\u00e3o (mapa) quantidade de acessos por sistema operacional","title":"Estatisticas"},{"location":"software-engineering/goals/#integracao-social","text":"O sistema dever\u00e1 possuir integra\u00e7\u00e3o com redes sociais, permitindo que os ouvintes possam curtir | compartilhar as musicas","title":"Integra\u00e7\u00e3o Social"},{"location":"software-engineering/goals/#integracao-com-os-ouvintes","text":"O sistema dever\u00e1 possuir uma \u00e1rea para sugest\u00f5es e cr\u00edticas dos ouvintes, todos os textos podem ser personalizados","title":"Integra\u00e7\u00e3o com os ouvintes"},{"location":"software-engineering/goals/#banners","text":"O sistema dever\u00e1 possuir uma area para banners (apenas de imagem)","title":"Banners"},{"location":"software-engineering/goals/#sorteio","text":"O sistema dever\u00e1 possuir uma area para criar sorteios entre os ouvintes podendo definir regras de sorteio como data de inicio / fim, condi\u00e7\u00f5es como curtiu um determinado numero de musicas ou compartilhou dentro do periodo do sorteio","title":"Sorteio"},{"location":"software-engineering/goals/#monitoramente","text":"O projeto deve possuir um sistema de monitoramente que detecta problemas no streaming da radio","title":"Monitoramente"},{"location":"software-engineering/goals/#historico-musical","text":"O sistema deve possuir um servi\u00e7o que armazena todas as musicas tocadas no player para exibi\u00e7\u00e3o futura","title":"Hist\u00f3rico Musical"},{"location":"software-engineering/goals/#suporte","text":"O sistema deve possuir uma area de suporte para as radios que possuirem duvidas","title":"Suporte"},{"location":"software-engineering/goals/#suporte-ao-usuario","text":"O sistema deve possuir uma area de suporte para os ouvintes caso estes venham a ter problemas com o streaming ou outra parte do sistema","title":"Suporte ao usu\u00e1rio"},{"location":"software-engineering/goals/#noticias","text":"O sistema deve possuir um sistema de noticias para as radios, visto que a maioria das r\u00e1dios tamb\u00e9m postam noticias","title":"Noticias"},{"location":"software-engineering/local-entities/","text":"Entidades Locais As entidades locais s\u00e3o especificas de cada fief (radio) do sistema.","title":"Entidades Locais"},{"location":"software-engineering/local-entities/#entidades-locais","text":"As entidades locais s\u00e3o especificas de cada fief (radio) do sistema.","title":"Entidades Locais"},{"location":"software-engineering/rules/","text":"Regras de Desenvolvimento Banco de dados Cada radio possuir\u00e1 seu pr\u00f3prio banco de dados, por isso \u00e9 importante criar uma t\u00e1tica que funcione bem para qualquer microservi\u00e7o j\u00e1 que estes ser\u00e3o utilizados em todos os outros Os bancos escolhidos s\u00e3o postgres e mongodb (para dados granulares) Backup Precisamos de backups do banco de dados, os intervalos ser\u00e3o definidos pelas r\u00e1dios pois cada intervalo ter\u00e1 diferentes custos (por hora, a cada 2 / 4 / 6 / 8 / 10 / 12 / 24 horas, semanal, mensal)","title":"Regras de Desenvolvimento"},{"location":"software-engineering/rules/#regras-de-desenvolvimento","text":"","title":"Regras de Desenvolvimento"},{"location":"software-engineering/rules/#banco-de-dados","text":"Cada radio possuir\u00e1 seu pr\u00f3prio banco de dados, por isso \u00e9 importante criar uma t\u00e1tica que funcione bem para qualquer microservi\u00e7o j\u00e1 que estes ser\u00e3o utilizados em todos os outros Os bancos escolhidos s\u00e3o postgres e mongodb (para dados granulares)","title":"Banco de dados"},{"location":"software-engineering/rules/#backup","text":"Precisamos de backups do banco de dados, os intervalos ser\u00e3o definidos pelas r\u00e1dios pois cada intervalo ter\u00e1 diferentes custos (por hora, a cada 2 / 4 / 6 / 8 / 10 / 12 / 24 horas, semanal, mensal)","title":"Backup"},{"location":"user-guide/fiefs/","text":"Fiefs (Feudos) os Fiefs (Feudos) s\u00e3o a entidade responsavel por identificar os tenants na aplica\u00e7\u00e3o, temos rotas disponiveis para todas as opera\u00e7\u00f5es padr\u00f5es de CRUD Rotas Rota M\u00e9todo Body comentarios / get lista todos os Fiefs (Feudos) / post fief cria um novo fief /:id get busca um fief correspondente com o id /:id put fief atualiza um fief correspondente com o id com as informa\u00e7\u00f5es do body /:id delete delete um fief correspondente com o id","title":"Fiefs (Feudos)"},{"location":"user-guide/fiefs/#fiefs-feudos","text":"os Fiefs (Feudos) s\u00e3o a entidade responsavel por identificar os tenants na aplica\u00e7\u00e3o, temos rotas disponiveis para todas as opera\u00e7\u00f5es padr\u00f5es de CRUD","title":"Fiefs (Feudos)"},{"location":"user-guide/fiefs/#rotas","text":"Rota M\u00e9todo Body comentarios / get lista todos os Fiefs (Feudos) / post fief cria um novo fief /:id get busca um fief correspondente com o id /:id put fief atualiza um fief correspondente com o id com as informa\u00e7\u00f5es do body /:id delete delete um fief correspondente com o id","title":"Rotas"},{"location":"user-guide/iam/","text":"identity access management toda a logica de identifica\u00e7\u00e3o e acesso dos fiefs (feudos) fica armazenada no microservice iam na pasta landlord/iam esse microservi\u00e7o utiliza um banco sql para armazenar os roles (cargos), permissions (permiss\u00f5es), users (usuarios), access_tokens (tokens de acesso temporarios), refresh_tokens (tokens para gerar um novo access token, pode haver at\u00e9 50 refresh_tokens ativos por usuario) existe tamb\u00e9m uma tabela que armazena os cargos dos usuarios (user_roles), uma que armazena as permiss\u00f5es do cargo (role_permissions) e uma que armazena as permiss\u00f5es diretas do usu\u00e1rio (user_permissions) JWT Para permitir que o token seja decodificado em qualquer um dos microservi\u00e7os sem a necessidade de acessar o microservi\u00e7o IAM novamente, \u00e9 utilizado um token jwt contendo as informa\u00e7\u00f5es do usuario e os cargos e permiss\u00f5es, esse token pode ser decodificado pelos microservi\u00e7os utilizando a variavel de ambiente JWT_SECRET que est\u00e1 presente em todos os microservi\u00e7os que usam autentica\u00e7\u00e3o","title":"IAM"},{"location":"user-guide/iam/#identity-access-management","text":"toda a logica de identifica\u00e7\u00e3o e acesso dos fiefs (feudos) fica armazenada no microservice iam na pasta landlord/iam esse microservi\u00e7o utiliza um banco sql para armazenar os roles (cargos), permissions (permiss\u00f5es), users (usuarios), access_tokens (tokens de acesso temporarios), refresh_tokens (tokens para gerar um novo access token, pode haver at\u00e9 50 refresh_tokens ativos por usuario) existe tamb\u00e9m uma tabela que armazena os cargos dos usuarios (user_roles), uma que armazena as permiss\u00f5es do cargo (role_permissions) e uma que armazena as permiss\u00f5es diretas do usu\u00e1rio (user_permissions)","title":"identity access management"},{"location":"user-guide/iam/#jwt","text":"Para permitir que o token seja decodificado em qualquer um dos microservi\u00e7os sem a necessidade de acessar o microservi\u00e7o IAM novamente, \u00e9 utilizado um token jwt contendo as informa\u00e7\u00f5es do usuario e os cargos e permiss\u00f5es, esse token pode ser decodificado pelos microservi\u00e7os utilizando a variavel de ambiente JWT_SECRET que est\u00e1 presente em todos os microservi\u00e7os que usam autentica\u00e7\u00e3o","title":"JWT"}]}